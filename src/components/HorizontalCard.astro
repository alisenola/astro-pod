---
const { title, cover, desc, url, audioUrl, id, pubDate, duration } = Astro.props;

import { Image } from "@astrojs/image/components";
import astropodConf from "../../astropod.conf.cjs";
import dayjs from "dayjs";
import localizedFormat from "dayjs/plugin/localizedFormat";
dayjs.extend(localizedFormat);

import PlayIcon from "./icons/playIcon.astro";
import PauseIcon from "./icons/pauseIcon.astro";

let cover_url = cover ? cover : astropodConf.cover;
const displayDate = dayjs(pubDate).format("ll");
---

<div class="podcast-card">
  <div class="hero-content flex-row">
    <img src={cover_url} alt={title} class="shadow-lg rounded-md w-20 h-20 md:w-24 md:h-24">
    <!-- <Image src={cover_url} aspectRatio="1:1" width={96} format="webp" alt={title} class="shadow-lg rounded-md w-18 h-18 md:w-24 md:h-24" /> -->
    <div class="grow w-full">
      <h2 class="text-xl font-semibold">
        {title}
      </h2>
      <p class="text-sm font-medium opacity-60">
        {duration && duration + " â€¢ "}
        {displayDate}
      </p>
      <p class="py-1 text-xs md:text-sm line-clamp-2">{desc}</p>
    </div>
    <label class="btn btn-circle md:mx-2 swap">
      <input type="checkbox" class="card-pay-buttons" id={id} data-audio-url={audioUrl} />
      <div class="swap-off">
        <PlayIcon />
      </div>
      <div class="swap-on">
        <PauseIcon />
      </div>
    </label>
  </div>
  <hr class="my-3 border-base-content opacity-[.15]" />
</div>

<style>
  .podcast-card:last-child hr{
    display: none;
  }
</style>